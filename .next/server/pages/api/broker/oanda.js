"use strict";(()=>{var t={};t.id=282,t.ids=[282],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6544:t=>{t.exports=import("node-fetch")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},6441:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{config:()=>d,default:()=>u,routeModule:()=>h});var n=r(1802),s=r(7153),c=r(6249),o=r(7580),i=t([o]);o=(i.then?(await i)():i)[0];let u=(0,c.l)(o,"default"),d=(0,c.l)(o,"config"),h=new n.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/broker/oanda",pathname:"/api/broker/oanda",bundlePath:"",filename:""},userland:o});a()}catch(t){a(t)}})},7493:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{c:()=>c});var n=r(6544),s=t([n]);n=(s.then?(await s)():s)[0];class c{constructor(t,e,r=!0){this.apiKey=t,this.accountId=e,this.baseUrl=r?"https://api-fxpractice.oanda.com/v3":"https://api-fxtrade.oanda.com/v3"}async request(t,e="GET",r){let a=`${this.baseUrl}${t}`,s={method:e,headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}};r&&(s.body=JSON.stringify(r));let c=await (0,n.default)(a,s);if(!c.ok)throw Error(await c.text());return c.json()}async getAccountSummary(){return this.request(`/accounts/${this.accountId}/summary`)}async getOpenPositions(){return this.request(`/accounts/${this.accountId}/openPositions`)}async getOrders(){return this.request(`/accounts/${this.accountId}/orders`)}async placeOrder(t){return this.request(`/accounts/${this.accountId}/orders`,"POST",{order:t})}async cancelOrder(t){return this.request(`/accounts/${this.accountId}/orders/${t}/cancel`,"PUT")}async getTrades(){return this.request(`/accounts/${this.accountId}/trades`)}async closeTrade(t){return this.request(`/accounts/${this.accountId}/trades/${t}/close`,"PUT")}async getPricing(t){return this.request(`/accounts/${this.accountId}/pricing?instruments=${t}`)}}a()}catch(t){a(t)}})},7580:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{default:()=>c});var n=r(7493),s=t([n]);async function c(t,e){let{apiKey:r,accountId:a,isPractice:s,action:c,params:o}=t.body;if(!r||!a)return e.status(400).json({error:"Missing API key or account ID"});let i=new n.c(r,a,s);try{switch(c){case"account":return e.json(await i.getAccountSummary());case"positions":return e.json(await i.getOpenPositions());case"orders":return e.json(await i.getOrders());case"placeOrder":return e.json(await i.placeOrder(o));case"cancelOrder":return e.json(await i.cancelOrder(o.orderId));case"trades":return e.json(await i.getTrades());case"closeTrade":return e.json(await i.closeTrade(o.tradeId));case"pricing":return e.json(await i.getPricing(o.instruments));default:return e.status(400).json({error:"Unknown action"})}}catch(t){return e.status(500).json({error:t.message})}}n=(s.then?(await s)():s)[0],a()}catch(t){a(t)}})},7153:(t,e)=>{var r;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return r}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(t,e,r)=>{t.exports=r(145)}};var e=require("../../../webpack-api-runtime.js");e.C(t);var r=e(e.s=6441);module.exports=r})();